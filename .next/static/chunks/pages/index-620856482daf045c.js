(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6586)}])},6586:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(5893),n=s(7294),i=e=>{let{vitals:t,alerts:s}=e;return(0,a.jsxs)("div",{className:"vital-signs-panel",children:[(0,a.jsx)("h3",{children:"Vital Signs"}),(0,a.jsxs)("div",{className:"vital ".concat(s.hr?"alert":""),children:[(0,a.jsx)("span",{className:"label",children:"HR:"}),(0,a.jsxs)("span",{className:"value",children:[t.hr," bpm"]})]}),(0,a.jsxs)("div",{className:"vital ".concat(s.bp?"alert":""),children:[(0,a.jsx)("span",{className:"label",children:"BP:"}),(0,a.jsxs)("span",{className:"value",children:[t.bp," mmHg"]})]}),(0,a.jsxs)("div",{className:"vital ".concat(s.spo2?"alert":""),children:[(0,a.jsx)("span",{className:"label",children:"SpO2:"}),(0,a.jsxs)("span",{className:"value",children:[t.spo2,"%"]})]})]})},r=e=>{let{currentStep:t,goToNextStep:s}=e;return(0,a.jsxs)("div",{className:"communication-guide-panel",children:[(0,a.jsx)("h2",{children:"PEARLS Communication Guide"}),(0,a.jsxs)("div",{className:"step-content",children:[(0,a.jsx)("h3",{children:t.name}),(0,a.jsx)("p",{className:"description",children:t.description}),(0,a.jsxs)("p",{className:"example",children:["Example: ",t.example]})]}),(0,a.jsx)("button",{onClick:s,className:"next-step-btn",children:"Next Step"})]})},l=e=>{let{messages:t,onSendMessage:s,isSending:i}=e,[r,l]=(0,n.useState)(""),o=(0,n.useRef)(null),c=()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,n.useEffect)(()=>{c()},[t]),(0,a.jsxs)("div",{className:"chat-interface",children:[(0,a.jsxs)("div",{className:"message-log",children:[t.map((e,t)=>(0,a.jsx)("div",{className:"message ".concat(e.sender),children:e.text},t)),(0,a.jsx)("div",{ref:o})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&!i&&(s(r),l(""))},className:"input-area",children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Type your message...",disabled:i}),(0,a.jsx)("button",{type:"submit",disabled:i,children:i?"Sending...":"Send"})]})]})},o=JSON.parse('{"S":[{"id":1,"name":"Partnership","description":"Build rapport and establish a collaborative relationship","example":"I\'m here to help you understand what\'s happening and work together to address your concerns."},{"id":2,"name":"Empathy","description":"Acknowledge and validate the patient\'s emotions","example":"I can see that this news is really difficult to process, and it\'s completely normal to feel overwhelmed."},{"id":3,"name":"Apology","description":"Express regret for the situation or any miscommunication","example":"I\'m sorry that you\'ve been waiting so long without clear information."},{"id":4,"name":"Respect","description":"Show appreciation for the patient\'s perspective and concerns","example":"I appreciate you being so open with me about your worries and your need to discuss this with your wife."},{"id":5,"name":"Legitimization","description":"Validate the patient\'s feelings and concerns as reasonable","example":"Your concerns about the financial impact and need to involve your wife are completely valid and important to address."},{"id":6,"name":"Support","description":"Offer concrete assistance and next steps","example":"We can work together to create a plan that addresses both your medical needs and your practical concerns."}]}');function c(){let[e,t]=(0,n.useState)({hr:85,bp:"120/80",spo2:98}),[s,c]=(0,n.useState)({hr:!1,bp:!1,spo2:!1}),[d]=(0,n.useState)(o.S),[h,p]=(0,n.useState)(0),[m,u]=(0,n.useState)([{sender:"ai",text:"Are my test results back yet? I've been waiting here for quite a while, and nobody has told me anything. I just want to know what's happening with this pain. It's not getting better with the medication like it did last time."}]),[x,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{c({hr:e.hr>100||e.hr<50,spo2:e.spo2<92,bp:!1})},[e]);let y=async e=>{if(!e.trim()||x)return;let t=[...m,{sender:"user",text:e}];u(t),g(!0);try{let s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,history:t.slice(-4)})});if(!s.ok)throw Error("API Error: ".concat(s.statusText));let a=await s.json();u(e=>[...e,{sender:"ai",text:a.reply}])}catch(e){console.error("Failed to send message:",e),u(e=>[...e,{sender:"ai",text:"I'm having trouble understanding. Could you please repeat that?"}])}finally{g(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 p-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Emergency Department - Patient Communication"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)(l,{messages:m,onSendMessage:y,isSending:x})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i,{vitals:e,alerts:s}),(0,a.jsx)(r,{currentStep:d[h],goToNextStep:()=>{p(e=>(e+1)%d.length)}})]})]}),(0,a.jsx)("button",{onClick:()=>{t(e=>({...e,hr:110})),u(e=>[...e,{sender:"ai",text:"My heart feels like it's racing... Is that normal? I'm really starting to worry about what's going on here. The pain isn't getting any better, and now my heart is acting up too. I need to know what's happening with my test results."}])},className:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Trigger Anxiety (â†‘HR)"})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);